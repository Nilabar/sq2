- Astro = Struct.new(:parent , :name , :type , :genus , :chars , :coordinates , :get_parents)
- Spaceship = Struct.new(:type , :location)
- AstroOwner = Struct.new(:owner)

-# location = Location.find_by(parent: @person.id)
- me_place = Spaceship.new(2,1)
-# me_place = Spaceship.find(location.place)
- ship_location = Spaceship.new(1,1)
-# ship_location = Location.find_by(parent: me_place.id)
- ship_place = Astro.new("","Возрождение",3,1,{},{},{})
-# ship_place = Astro.find(ship_location.place)
- ship_place_parents = ship_place.get_parents

.col-md-1{:style => "color: #7482a2;"}
  .d-flex.align-items-start.flex-column{:style => "height: 90%;"}
    #info-system.mb-auto
      %strong Система Новый дом
      %ul
        %li планет: 10
        %li класс: 
        %li владелец: Администрация
    - if me_place.type != 1
      %div
        %a#btn-mui-planet.btn.btn-mui
          %img{:src => "http://nilabar.h1n.ru/sq2/img/planet_mui.png"}/
          %small= ship_place.name
      %div
        %a#btn-mui-system.btn.btn-mui
          %img{:src => "http://nilabar.h1n.ru/sq2/img/system_mui.png"}/
          %small Новый дом
      %div
        %a#btn-mui-claster.btn.btn-mui
          %img{:src => "http://nilabar.h1n.ru/sq2/img/claster_mui.png"}/
          %small а хрен его знает..
          
- case ship_location.type
- when 1
#gamearea-point.col-md-10
  - if me_place.type == 1
    .d-flex.justify-content-center
      %img#base-img{:alt => "", :src => "http://nilabar.h1n.ru/sq2/img/base.png", :style => "border-style:none", :usemap => "#base"}/
      %map#base-map{:name => "base"}
        %map#base{:name => "base"}
          %area{:coords => "378, 199, 365, 191, 354, 173, 363, 156, 393, 145, 421, 138, 420, 143, 397, 150, 379, 160, 371, 166, 372, 175, 378, 190, 387, 202, 426, 219, 476, 215, 477, 206, 488, 204, 515, 194, 527, 173, 515, 160, 502, 153, 485, 142, 502, 144, 524, 156, 542, 169, 539, 177, 535, 187, 524, 195, 509, 204, 480, 213, 481, 219, 507, 216, 505, 211, 511, 211, 516, 216, 548, 203, 578, 194, 581, 179, 574, 173, 547, 151, 511, 135, 480, 131, 470, 131, 471, 120, 468, 115, 459, 115, 453, 129, 422, 129, 380, 135, 339, 149, 327, 155, 316, 169, 330, 183, 353, 199, 379, 213, 382, 207", :href => "#", :module => "A0", :shape => "poly"}/
          %area{:coords => "574, 160, 576, 152, 567, 149, 567, 142, 570, 142, 569, 138, 560, 143, 551, 134, 551, 126, 565, 116, 613, 117, 631, 103, 630, 92, 651, 64, 658, 61, 669, 65, 670, 70, 669, 74, 680, 79, 687, 71, 697, 72, 702, 78, 702, 83, 698, 86, 698, 95, 698, 107, 692, 111, 682, 112, 674, 109, 675, 99, 678, 92, 674, 87, 670, 82, 666, 89, 670, 95, 666, 119, 674, 115, 696, 118, 694, 129, 683, 131, 690, 143, 690, 153, 688, 163, 685, 166, 673, 167, 682, 158, 683, 147, 682, 139, 674, 141, 676, 149, 676, 158, 669, 161, 666, 170, 662, 173, 638, 179, 618, 179, 610, 175, 604, 170, 596, 173, 582, 168", :href => "#", :module => "A1", :shape => "poly"}/
          %area{:coords => "438, 299, 426, 310, 418, 307, 413, 318, 418, 335, 418, 344, 424, 351, 430, 370, 436, 367, 437, 376, 457, 378, 457, 368, 468, 375, 475, 356, 482, 352, 484, 343, 478, 343, 488, 316, 478, 314, 471, 307, 466, 303, 459, 298", :href => "#", :module => "A2", :shape => "poly"}/
          %area{:coords => "467, 269, 467, 288, 470, 294, 481, 300, 486, 303, 501, 303, 501, 315, 506, 318, 506, 310, 520, 319, 521, 327, 525, 327, 525, 318, 533, 313, 535, 321, 545, 311, 542, 299, 546, 298, 550, 303, 567, 298, 590, 298, 590, 302, 588, 312, 594, 318, 595, 311, 610, 318, 611, 326, 628, 307, 627, 301, 638, 299, 647, 295, 654, 287, 657, 278, 656, 263, 658, 258, 655, 251, 638, 251, 629, 248, 608, 247, 595, 241, 592, 235, 587, 239, 579, 235, 578, 223, 571, 234, 570, 219, 533, 219, 528, 223, 527, 231, 521, 235, 496, 251, 487, 251, 481, 255, 474, 260", :href => "#", :module => "A4", :shape => "poly"}/
          %area{:coords => "674, 210, 684, 217, 682, 223, 681, 234, 689, 238, 684, 244, 683, 252, 687, 256, 681, 259, 684, 264, 689, 264, 698, 274, 705, 279, 719, 282, 746, 288, 754, 288, 774, 288, 790, 283, 798, 276, 802, 272, 806, 273, 810, 267, 817, 266, 836, 252, 838, 231, 825, 210, 812, 203, 803, 196, 805, 191, 810, 182, 801, 174, 788, 169, 771, 167, 757, 168, 748, 176, 749, 183, 752, 187, 742, 190, 736, 182, 732, 185, 715, 187, 701, 190, 690, 195, 680, 203", :href => "#", :module => "A5", :shape => "poly"}/
          %area{:coords => "274, 240, 270, 234, 235, 237, 229, 240, 224, 243, 218, 247, 218, 251, 214, 254, 214, 261, 216, 263, 215, 269, 221, 271, 227, 271, 230, 274, 237, 276, 270, 271, 274, 267, 277, 263, 278, 255, 277, 249", :href => "#", :module => "CASINO", :shape => "poly"}/
          %area{:coords => "290, 256, 294, 244, 296, 236, 294, 231, 294, 226, 293, 219, 298, 219, 298, 224, 305, 227, 314, 231, 322, 226, 327, 221, 334, 221, 340, 226, 348, 227, 359, 228, 366, 231, 370, 235, 376, 237, 379, 243, 378, 247, 370, 251, 367, 255, 367, 262, 366, 268, 354, 273, 342, 276, 330, 278, 322, 276, 317, 283, 317, 299, 312, 279, 307, 273, 309, 270, 298, 267, 292, 260", :href => "#", :module => "CAPELLA", :shape => "poly"}/
          %area{:coords => "378, 236, 381, 243, 381, 247, 374, 249, 369, 251, 366, 255, 367, 260, 366, 267, 366, 277, 366, 282, 370, 287, 374, 286, 381, 289, 383, 295, 389, 295, 391, 289, 396, 287, 399, 284, 399, 291, 402, 293, 407, 293, 411, 292, 409, 256, 403, 252, 395, 247, 388, 245, 392, 240, 390, 233", :href => "#", :module => "PUB", :shape => "poly"}/
          %area{:coords => "212, 161, 204, 156, 178, 171, 174, 168, 178, 163, 170, 157, 161, 153, 152, 151, 150, 144, 142, 139, 130, 139, 122, 146, 118, 155, 115, 163, 118, 163, 96, 178, 96, 186, 82, 192, 82, 206, 82, 213, 60, 223, 62, 229, 80, 241, 89, 241, 102, 234, 109, 238, 117, 242, 118, 237, 124, 239, 134, 233, 142, 235, 146, 232, 162, 231, 174, 230, 185, 228, 198, 223, 206, 219, 217, 212, 222, 203, 221, 198, 218, 194, 221, 189, 226, 192, 239, 181, 230, 175, 228, 168, 221, 164", :href => "#", :module => "A7", :shape => "poly"}/
          %area{:coords => "284, 154, 276, 147, 271, 139, 264, 134, 282, 127, 263, 119, 262, 114, 270, 111, 267, 87, 267, 82, 272, 79, 282, 77, 287, 79, 291, 84, 322, 113, 326, 107, 335, 106, 345, 106, 349, 110, 357, 111, 357, 115, 366, 119, 373, 120, 373, 135, 357, 137, 350, 143, 352, 147, 338, 149, 324, 152, 316, 150, 305, 149, 297, 151", :href => "#", :module => "A8", :shape => "poly"}/
    :javascript
 
      $('img#base-img').mapster({
          mapKey:'module',
          stroke: true,
          isSelectable:false,
          fillColor:'0099ff',
          fillOpacity: 0.3 ,
          showToolTip:true,
          render_highlight: {
              strokeWidth: 1,
              strokeColor:'0099ff'
          },
          onClick:(data)=>{
              console.log(data);
          },
              areas:  [{
                 key: "A0", 
                 toolTip: "A0"
              },
              { 
                 key: "A1", 
                 toolTip: "A1"
              },
              { 
                 key: "A2", 
                 toolTip: "A2"
              },
              { 
                 key: "A3", 
                 toolTip: "A3"
              },
              { 
                 key: "A4", 
                 toolTip: "A4"
              },
              { 
                 key: "A5", 
                 toolTip: "A5"
              },
              { 
                 key: "A6", 
                 toolTip: "A6"
              },
              { 
                 key: "A7", 
                 toolTip: "A7"
              },
              { 
                 key: "A8", 
                 toolTip: "A8"
              },
              { 
                 key: "CASINO", 
                 toolTip: "CASINO"
              },
              { 
                 key: "CAPELLA", 
                 toolTip: "CAPELLA"
              },
              { 
                 key: "PUB", 
                 toolTip: "PUB"
              }]
      })/*.mapster('set',true,'PUB,CAPELLA,CASINO,A1,A2,A3,A4,A5,A7,A8,A0')*/;


  - elsif me_place.type == 2
    .d-flex.justify-content-center
      #phaser-box
      -# owner = AstroOwner.find_by(astro:ship_place.id)
      - owner = AstroOwner.new("Администрация")
      - if ship_place.type == 8
        - owner = ""
      - else
        -# owner = Person.find(owner.owner).name
        - owner = owner.owner
      %a#loc-planet.d-none{:data=>{:planet_name => ship_place.name ,:planet_type => ship_place.type ,:planet_genus => ship_place.genus,:planet_owner => owner}}
      %div{:style=>"position:absolute;right:0;color:#7482a2"}
        .card{:style=>"width:30vw;background: #02000a4d"}
          .card-header.btn-group.btn-group-sm.d-inline-flex.justify-content-end
            .btn.disabled.text-secondary.mr-auto
              %i.fa.fa-fighter-jet
              %span#radar-user.badge.badge-dark 999
            %button.btn.btn-dark.chat
              %i.fa.fa-stop
            %button.btn.btn-dark.chat.active
              %i.fa.fa-play
            %button.btn.btn-dark.chat
              %i.fa.fa-forward
            %button.btn.btn-dark.chat
              %i.fa.fa-refresh  
            %button.btn.btn-dark.chat.block-close-btn
              %i.fa.fa-times  
              
          #radar-point.card-body 
            %div.scrollbar#neighbors{:style=>"height:24rem"}    
                
          .card-footer.d-none{:style=>"background: #2b3046c9;"}
            %span footer
      %script{:defer => true , :src => "js/phaserOrbit.js"}
      
.col-md-1
  .d-flex.align-items-start.flex-column.text-danger{:style => "height: 95%;"}
    .mb-auto
    %div
      %a#btn-mui-logout.btn-mui
        %img{:src => "http://nilabar.h1n.ru/sq2/img/r_mui.png"}/
